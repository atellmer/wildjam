!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Spawn",[],e):"object"==typeof exports?exports.Spawn=e():r.Spawn=e()}(this,function(){return function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t={};return e.m=r,e.c=t,e.i=function(r){return r},e.d=function(r,t,n){e.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},e.p="",e(e.s=8)}([function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.error=e.hasKey=e.isString=e.isFunc=e.isArray=e.isObject=e.isPlainObject=void 0;var n=t(7);e.isPlainObject=n.isPlainObject,e.isObject=n.isObject,e.isArray=n.isArray,e.isFunc=n.isFunc,e.isString=n.isString,e.hasKey=n.hasKey,e.error=n.error},function(r,e,t){"use strict";function n(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.forEach(function(r){if(!(0,o.isFunc)(r))return(0,o.error)("spawn-x: the addInterceptor takes only a function as arguments!")}),[].concat(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.addInterceptor=void 0;var o=t(0);e.addInterceptor=n},function(r,e,t){"use strict";function n(){for(var r={},e=[],t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return 1===n.length?(0,i.isPlainObject)(n[0])?(r=n[0],new o.Spawn(r,e)):(0,i.isArray)(n[0])?(e=n[0].filter(function(r){return(0,i.isFunc)(r)}),new o.Spawn(r,e)):(0,i.error)("spawn-x: createStore with one argument takes only a plain object or addInterceptor function!"):n.length>1?(0,i.isPlainObject)(n[0])?(r=n[0],(0,i.isArray)(n[1])?(e=n[1].filter(function(r){return(0,i.isFunc)(r)}),new o.Spawn(r,e)):(0,i.error)("spawn-x: createStore with two arguments takes as second argument only addInterceptor function!")):(0,i.error)("spawn-x: createStore with two arguments takes as first argument only a plain object!"):new o.Spawn(r,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.createStore=void 0;var o=t(4),i=t(0);e.createStore=n},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.INIT={data:{},type:"@@SPAWN/INIT"}},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Spawn=void 0;var n=t(6);e.Spawn=n.Spawn},function(r,e,t){"use strict";function n(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function o(r){return(0,y.isPlainObject)(r)?b({},r):(0,y.isArray)(r)?[].concat(n(r)):r}function i(r){var e=r.subscribers,t=r.subscribersArgs,o=r.action;e.forEach(function(r,e){return r.apply(void 0,n(t[e]).concat([o]))})}function a(r,e){return r.forEach(function(r){if(r===e)return!1}),!0}function u(r){var e=r.subscribers,t=r.subscribersArgs,n=r.cb;return e.forEach(function(r,o){if(r===n)return e.splice(o,1),t.splice(o,1),!0}),!1}function s(r,e){for(var t=r.split("."),n=e,o=0;o<t.length;o++){if(!n.hasOwnProperty(t[o]))return null;n=n[t[o]]}return n}function c(r,e){Object.keys(r).forEach(function(t){return i({subscribers:r[t],subscribersArgs:e[t]})})}function f(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return 0===e.length?function(r){return r}:1===e.length?e[0]:e.reduce(function(r,e){return function(){return r(e.apply(void 0,arguments))}})}function p(r){return function(e){return function(t){return f.apply(void 0,n(t.map(function(e){return e(r)})))(function(r){return r})(e)}}}function l(r){var e=r.action,t=r.zone,n=r.subscribers,o=r.subscribersArgs,a=r.afterUpdate,u=Object.keys(n).filter(function(r){return"*"!==r}),s=t.split(".");u.forEach(function(r){var e=r.split(".");if(r===t)return void i({subscribers:n[r],subscribersArgs:o[r]});if(e.length<=s.length){var a=!0;return e.forEach(function(r,e){if(r!==s[e])return void(a=!1)}),void(a&&i({subscribers:n[r],subscribersArgs:o[r]}))}if(e.length>s.length){var u=!0;return s.forEach(function(r,t){if(r!==e[t])return void(u=!1)}),void(u&&i({subscribers:n[r],subscribersArgs:o[r]}))}}),a&&i({subscribers:n["*"],subscribersArgs:o["*"],action:e})}Object.defineProperty(e,"__esModule",{value:!0}),e.applyLogic=e.applyInterceptors=e.compose=e.autorun=e.findZoneValue=e.removeCallback=e.checkCallback=e.mapSubscribers=e.getImmutableCopy=void 0;var b=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},y=t(0);e.getImmutableCopy=o,e.mapSubscribers=i,e.checkCallback=a,e.removeCallback=u,e.findZoneValue=s,e.autorun=c,e.compose=f,e.applyInterceptors=p,e.applyLogic=l},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Spawn=void 0;var n=t(3),o=t(5),i=t(0),a=function(r,e){var t=this,a=r,u={"*":[]},s={"*":[]};this.select=function(r){if((0,i.isString)(r))switch(r){case"*":return(0,o.getImmutableCopy)(a);default:return(0,o.getImmutableCopy)((0,o.findZoneValue)(r,a))}return(0,i.isFunc)(r)?(0,o.getImmutableCopy)(r((0,o.getImmutableCopy)(a))):(0,i.error)("spawn-x: the select method takes only a string or function as argument!")},this.detect=function(r,e){for(var n=arguments.length,c=Array(n>2?n-2:0),f=2;f<n;f++)c[f-2]=arguments[f];return(0,i.isString)(r)?(0,i.isFunc)(e)?(u[r]||s[r]||(u[r]=[],s[r]=[]),(0,o.checkCallback)(u[r],e)?(u[r].push(e),s[r].push(c),(0,o.findZoneValue)(r,a)&&(0,o.applyLogic)({zone:r,subscribers:u,subscribersArgs:s,afterUpdate:!1}),t):t):(0,i.error)("spawn-x: the detect method takes only a function for second argument!"):(0,i.error)("spawn-x: the detect method takes only a string for first argument!")},this.reject=function(r,e){return(0,i.isString)(r)?(0,i.isFunc)(e)?(u[r]&&(0,o.removeCallback)({subscribers:u[r],subscribersArgs:s[r],cb:e}),t):(0,i.error)("spawn-x: the reject method takes only a function for second argument!"):(0,i.error)("spawn-x: the reject method takes only a string for first argument!")},this.update=function(r,n){function c(){var e=this;return function(){return function(t){var n=r.split("."),c=a;if("*"===r)return(0,i.isPlainObject)(t.data)?(a=(0,o.getImmutableCopy)(t.data),(0,o.autorun)(u,s),e):(0,i.error)("spawn-x: the update method takes only a plain object for replace full state! Check your update('*') method.");for(var f=0;f<n.length;f++)c.hasOwnProperty(n[f])||(c[n[f]]={}),f===n.length-1?c[n[f]]=t.data:c=c[n[f]];(0,o.applyLogic)({action:(0,o.getImmutableCopy)(t),zone:r,subscribers:u,subscribersArgs:s,afterUpdate:!0})}}}return(0,i.isString)(r)?(0,i.isPlainObject)(n)?(0,i.hasKey)(n,"data")?(0,i.hasKey)(n,"type")?(0,i.isString)(n.type)?((0,o.applyInterceptors)(t)(n)(e.concat(c)),t):(0,i.error)("spawn-x: type of action must be a string!"):(0,i.error)("spawn-x: action must have a 'type' key!"):(0,i.error)("spawn-x: action must have a 'data' key!"):(0,i.error)("spawn-x: action must be a plain object!"):(0,i.error)("spawn-x: the update method takes only a string for first argument!")},(0,o.applyInterceptors)(this)(n.INIT)(e.concat(function(r){return function(r){return function(e){return r(e)}}}))};e.Spawn=a},function(r,e,t){"use strict";function n(r){return!(!o(r)||i(r))}function o(r){return"object"===("undefined"==typeof r?"undefined":f(r))&&null!==r}function i(r){return Array.isArray(r)}function a(r){return"function"==typeof r}function u(r){return"string"==typeof r}function s(r,e){for(var t in r)if(r.hasOwnProperty(t)&&t===e)return!0;return!1}function c(r){throw new Error(r)}Object.defineProperty(e,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};e.isPlainObject=n,e.isObject=o,e.isArray=i,e.isFunc=a,e.isString=u,e.hasKey=s,e.error=c},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addInterceptor=e.createStore=void 0;var n=t(2),o=t(1);e.createStore=n.createStore,e.addInterceptor=o.addInterceptor}])});